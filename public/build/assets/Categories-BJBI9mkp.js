import{r as l,u as $,j as e,a as B}from"./app-BOLgj3qB.js";import{A as P}from"./AdminLayout-CG6SnJGX.js";function J({auth:h,categories:g=[],flash:r}){const[x,y]=l.useState(!1),[N,c]=l.useState(!1),[j,f]=l.useState(!1),[_,n]=l.useState(!1),[p,C]=l.useState(!1),[S,d]=l.useState(!1),[v,w]=l.useState(null),[m,k]=l.useState(null),[E,A]=l.useState(!0),[M,D]=l.useState(!0),a=$({category_name:"",category_description:"",category_image_url:"",status:"active"}),t=$({category_name:"",category_description:"",category_image_url:"",status:"active"});l.useEffect(()=>{x?setTimeout(()=>c(!0),10):c(!1)},[x]),l.useEffect(()=>{j?setTimeout(()=>n(!0),10):n(!1)},[j]),l.useEffect(()=>{p?setTimeout(()=>d(!0),10):d(!1)},[p]);const u=()=>{c(!1),setTimeout(()=>{y(!1),a.reset(),a.setData({category_name:"",category_description:"",category_image_url:"",status:"active"})},300)},o=()=>{n(!1),setTimeout(()=>{f(!1),w(null),t.reset()},300)},i=()=>{d(!1),setTimeout(()=>{C(!1),k(null)},300)};l.useEffect(()=>{r!=null&&r.success&&(u(),o(),i(),a.reset(),t.reset(),A(!0)),r!=null&&r.error&&D(!0)},[r]);const R=s=>{s.preventDefault(),a.post(b,{preserveScroll:!0,onSuccess:()=>{a.reset()}})},I=s=>{w(s),t.setData({category_name:String(s.category_name||""),category_description:String(s.category_description||""),category_image_url:String(s.category_image_url||""),status:String(s.status||"active")}),f(!0),n(!1)},T=s=>{s.preventDefault(),v&&t.put(`${b}/${v.id}`,{preserveScroll:!0,onSuccess:()=>{o()}})},F=s=>{const q=g.find(z=>z.id===s);k(q),C(!0),d(!1)},L=()=>{m&&B.delete(`${b}/${m.id}`,{preserveScroll:!0,onSuccess:()=>{i()}})},U=s=>s==="active"?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-danger",children:"Inactive"}),b=h.user.user_type==="super_admin"?"/dashboard/super-admin/categories":h.user.user_type==="admin"?"/dashboard/admin/categories":"/dashboard/categories";return e.jsxs(P,{auth:h,title:"Categories",children:[(r==null?void 0:r.success)&&E&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Success!"})," ",r.success,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),A(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(r==null?void 0:r.error)&&M&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error!"})," ",r.error,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),D(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Category List"}),e.jsx("div",{className:"card-tools",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{y(!0),c(!1)},children:[e.jsx("i",{className:"fas fa-plus"})," Add Category"]})})]}),e.jsx("div",{className:"card-body table-responsive p-0",children:e.jsxs("table",{className:"table table-hover text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Image URL"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center",children:"No categories found"})}):g.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.category_name}),e.jsx("td",{children:s.category_description||"-"}),e.jsx("td",{children:s.category_image_url?e.jsxs("a",{href:s.category_image_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("i",{className:"fas fa-image"})," View"]}):"-"}),e.jsx("td",{children:U(s.status)}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-info mr-1",onClick:()=>I(s),title:"Edit Category",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>F(s.id),title:"Delete Category",children:e.jsx("i",{className:"fas fa-trash"})})]})]},s.id))})]})})]})})}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${N?"show":""}`,onClick:u}),e.jsx("div",{className:`modal fade ${N?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Add New Category"}),e.jsx("button",{type:"button",className:"close",onClick:u,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${a.errors.category_name?"is-invalid":""}`,value:a.data.category_name,onChange:s=>a.setData("category_name",s.target.value),required:!0}),a.errors.category_name&&e.jsx("div",{className:"invalid-feedback",children:a.errors.category_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:`form-control ${a.errors.category_description?"is-invalid":""}`,value:a.data.category_description,onChange:s=>a.setData("category_description",s.target.value),rows:"3"}),a.errors.category_description&&e.jsx("div",{className:"invalid-feedback",children:a.errors.category_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image URL"}),e.jsx("input",{type:"url",className:`form-control ${a.errors.category_image_url?"is-invalid":""}`,value:a.data.category_image_url,onChange:s=>a.setData("category_image_url",s.target.value),placeholder:"https://example.com/image.jpg"}),a.errors.category_image_url&&e.jsx("div",{className:"invalid-feedback",children:a.errors.category_image_url})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${a.errors.status?"is-invalid":""}`,value:a.data.status,onChange:s=>a.setData("status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),a.errors.status&&e.jsx("div",{className:"invalid-feedback",children:a.errors.status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a.processing,children:a.processing?"Creating...":"Create Category"})]})]})]})})})]}),j&&v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${_?"show":""}`,onClick:o}),e.jsx("div",{className:`modal fade ${_?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Edit Category"}),e.jsx("button",{type:"button",className:"close",onClick:o,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${t.errors.category_name?"is-invalid":""}`,value:t.data.category_name,onChange:s=>t.setData("category_name",s.target.value),required:!0}),t.errors.category_name&&e.jsx("div",{className:"invalid-feedback",children:t.errors.category_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:`form-control ${t.errors.category_description?"is-invalid":""}`,value:t.data.category_description,onChange:s=>t.setData("category_description",s.target.value),rows:"3"}),t.errors.category_description&&e.jsx("div",{className:"invalid-feedback",children:t.errors.category_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image URL"}),e.jsx("input",{type:"url",className:`form-control ${t.errors.category_image_url?"is-invalid":""}`,value:t.data.category_image_url,onChange:s=>t.setData("category_image_url",s.target.value),placeholder:"https://example.com/image.jpg"}),t.errors.category_image_url&&e.jsx("div",{className:"invalid-feedback",children:t.errors.category_image_url})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${t.errors.status?"is-invalid":""}`,value:t.data.status,onChange:s=>t.setData("status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),t.errors.status&&e.jsx("div",{className:"invalid-feedback",children:t.errors.status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t.processing,children:t.processing?"Updating...":"Update Category"})]})]})]})})})]}),p&&m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${S?"show":""}`,onClick:i}),e.jsx("div",{className:`modal fade ${S?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{type:"button",className:"close",onClick:i,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:m.category_name}),"?"]}),e.jsx("p",{className:"text-muted mb-0",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:L,children:"Delete Category"})]})]})})})]})]})}export{J as default};
