import{r as l,u as S,j as e,a as x}from"./app-BOLgj3qB.js";import{A as _}from"./AdminLayout-CG6SnJGX.js";function C({auth:j,orders:o=[],shop:f,flash:t}){const[c,u]=l.useState(!1),[h,n]=l.useState(!1),[r,m]=l.useState(null),a=S({item_status:""});l.useEffect(()=>{c?setTimeout(()=>n(!0),10):n(!1)},[c]);const d=()=>{n(!1),setTimeout(()=>{u(!1),m(null),a.reset()},300)};l.useEffect(()=>{t!=null&&t.success&&(d(),a.reset())},[t]);const p=s=>{m(s),a.setData({item_status:s.item_status}),u(!0),n(!1)},b=s=>{s.preventDefault(),a.put(`/dashboard/vendor/orders/${r.id}`,{preserveScroll:!0,onSuccess:()=>{d()}})},v=s=>{const i={ordered:"warning",shipped:"info",delivered:"success",cancelled:"danger"}[s]||"secondary";return e.jsx("span",{className:`badge badge-${i}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},g=s=>{const i={pending:"warning",processing:"info",completed:"success",cancelled:"danger"}[s]||"secondary";return e.jsx("span",{className:`badge badge-${i}`,children:s.charAt(0).toUpperCase()+s.slice(1)})};return e.jsxs(_,{auth:j,title:"Orders",children:[(t==null?void 0:t.success)&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Success!"})," ",t.success,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),x.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(t==null?void 0:t.error)&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error!"})," ",t.error,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),x.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Order List"})}),e.jsx("div",{className:"card-body table-responsive p-0",children:e.jsxs("table",{className:"table table-hover text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"Product"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Item Status"}),e.jsx("th",{children:"Order Status"}),e.jsx("th",{children:"Ordered At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center",children:"No orders found"})}):o.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",s.order_id]}),e.jsx("td",{children:s.item_name}),e.jsxs("td",{children:[e.jsx("div",{children:s.customer_name}),e.jsx("small",{className:"text-muted",children:s.customer_email})]}),e.jsx("td",{children:s.quantity}),e.jsxs("td",{children:["$",parseFloat(s.price_at_purchase).toFixed(2)]}),e.jsxs("td",{children:["$",parseFloat(s.total).toFixed(2)]}),e.jsx("td",{children:v(s.item_status)}),e.jsx("td",{children:g(s.order_status)}),e.jsx("td",{children:new Date(s.ordered_at).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-info",onClick:()=>p(s),title:"Update Status",children:[e.jsx("i",{className:"fas fa-edit"})," Update"]})})]},s.id))})]})})]})})}),c&&r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${h?"show":""}`,onClick:d}),e.jsx("div",{className:`modal fade ${h?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Update Order Status"}),e.jsx("button",{type:"button",className:"close",onClick:d,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Order ID:"})," #",r.order_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",r.item_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",r.customer_name]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Item Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${a.errors.item_status?"is-invalid":""}`,value:a.data.item_status,onChange:s=>a.setData("item_status",s.target.value),required:!0,children:[e.jsx("option",{value:"ordered",children:"Ordered"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.errors.item_status&&e.jsx("div",{className:"invalid-feedback",children:a.errors.item_status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a.processing,children:a.processing?"Updating...":"Update Status"})]})]})]})})})]})]})}export{C as default};
