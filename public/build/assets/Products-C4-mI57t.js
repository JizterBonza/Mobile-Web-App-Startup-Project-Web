import{r as l,u as V,j as e,a as ge}from"./app-BOLgj3qB.js";import{A as je}from"./AdminLayout-CG6SnJGX.js";function Ne({auth:K,products:E=[],shop:ve,flash:c,stockImages:x=[],categories:U=[],subCategories:T=[]}){const[$,L]=l.useState(!1),[W,p]=l.useState(!1),[D,z]=l.useState(!1),[O,b]=l.useState(!1),[I,G]=l.useState(!1),[J,N]=l.useState(!1),[P,B]=l.useState(null),[f,Q]=l.useState(null),[g,_]=l.useState([]),[h,y]=l.useState([]),[n,q]=l.useState([]),[k,A]=l.useState("upload"),[S,F]=l.useState("upload"),[m,w]=l.useState([]),[o,M]=l.useState([]),[X,H]=l.useState(!0),[Z,Y]=l.useState(!0),i=V({item_name:"",item_description:"",item_price:"",item_quantity:"",weight:"",metric:"",category:"",sub_category_id:"",item_images:[],stock_image_urls:[],item_status:"active"}),t=V({item_name:"",item_description:"",item_price:"",item_quantity:"",weight:"",metric:"",category:"",sub_category_id:"",item_images:[],stock_image_urls:[],item_status:"active"});l.useEffect(()=>{$?setTimeout(()=>p(!0),10):p(!1)},[$]),l.useEffect(()=>{D?setTimeout(()=>b(!0),10):b(!1)},[D]),l.useEffect(()=>{I?setTimeout(()=>N(!0),10):N(!1)},[I]);const C=()=>{p(!1),setTimeout(()=>{L(!1),i.reset(),_([]),w([]),A("upload"),i.setData({item_name:"",item_description:"",item_price:"",item_quantity:"",weight:"",metric:"",category:"",sub_category_id:"",item_images:[],stock_image_urls:[],item_status:"active"})},300)},ee=s=>{const a=Array.from(s.target.files);if(a.length>0){i.setData("item_images",a);const r=a.map(u=>URL.createObjectURL(u));_(r)}},se=s=>{const a=Array.from(i.data.item_images);a.splice(s,1),i.setData("item_images",a);const r=[...g];URL.revokeObjectURL(r[s]),r.splice(s,1),_(r)},j=()=>{b(!1),setTimeout(()=>{z(!1),B(null),t.reset(),y([]),q([]),M([]),F("upload"),h.forEach(s=>{s&&s.startsWith("blob:")&&URL.revokeObjectURL(s)})},300)},ae=s=>{const a=Array.from(s.target.files);if(a.length>0){const u=[...t.data.item_images||[],...a];t.setData("item_images",u);const R=a.map(d=>URL.createObjectURL(d));y(d=>[...d,...R])}s.target.value=""},te=s=>{const a=Array.from(t.data.item_images||[]),r=[...h];r[s]&&r[s].startsWith("blob:")&&URL.revokeObjectURL(r[s]),a.splice(s,1),r.splice(s,1),t.setData("item_images",a),y(r)},ie=s=>{const a=[...n];a.splice(s,1),q(a)},re=s=>{w(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},le=s=>{M(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},ce=s=>{w(a=>a.filter(r=>r!==s))},ne=s=>{M(a=>a.filter(r=>r!==s))},v=()=>{N(!1),setTimeout(()=>{G(!1),Q(null)},300)};l.useEffect(()=>{c!=null&&c.success&&(C(),j(),v(),i.reset(),t.reset(),H(!0)),c!=null&&c.error&&Y(!0)},[c]);const oe=s=>{s.preventDefault();const a=i.data.item_images&&i.data.item_images.length>0,r=m&&m.length>0;if(!a&&!r){i.setError("item_images","At least one product image is required.");return}i.transform(u=>({...u,stock_image_urls:m})),i.post("/dashboard/vendor/products",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{i.reset(),_([]),w([])}})},de=s=>{B(s);let a=[];if(s.item_images){if(Array.isArray(s.item_images))a=s.item_images;else if(typeof s.item_images=="string")try{a=JSON.parse(s.item_images)}catch{a=[s.item_images]}}a=a.map(r=>r?r.startsWith("http://")||r.startsWith("https://")||r.startsWith("/storage/")?r:`/storage/${r.replace(/^storage\//,"")}`:null).filter(r=>r!==null),t.setData({item_name:String(s.item_name||""),item_description:String(s.item_description||""),item_price:s.item_price!=null?String(s.item_price):"",item_quantity:s.item_quantity!=null?String(s.item_quantity):"",weight:s.weight!=null?String(s.weight):"",metric:String(s.metric||""),category:String(s.category||""),sub_category_id:s.sub_category_id!=null?String(s.sub_category_id):"",item_images:[],item_status:String(s.item_status||"active"),existing_images:a}),q(a),y([]),z(!0),b(!1)},me=s=>{if(s.preventDefault(),!P)return;const a=t.data,r=a.item_images&&a.item_images.length>0,u=n&&n.length>0,R=o&&o.length>0;if(!u&&!r&&!R){t.setError("item_images","At least one product image is required.");return}if(!a.item_name||String(a.item_name).trim()===""){t.setError("item_name","The item name field is required.");return}if(!a.item_price||a.item_price===""||a.item_price==null){t.setError("item_price","The item price field is required.");return}if(!a.item_quantity||a.item_quantity===""||a.item_quantity==null){t.setError("item_quantity","The item quantity field is required.");return}JSON.stringify(a.existing_images||[])!==JSON.stringify(n||[])&&t.setData("existing_images",n||[]),!r&&a.item_images&&a.item_images.length>0&&t.setData("item_images",[]),t.transform(d=>({...d,existing_images:n||[],stock_image_urls:o||[]})),t.put(`/dashboard/vendor/products/${P.id}`,{preserveScroll:!0,forceFormData:r,onSuccess:()=>{h.forEach(d=>{d&&d.startsWith("blob:")&&URL.revokeObjectURL(d)}),j()},onError:d=>{console.error("Update product errors:",d)}})},he=s=>{const a=E.find(r=>r.id===s);Q(a),G(!0),N(!1)},ue=()=>{f&&ge.delete(`/dashboard/vendor/products/${f.id}`,{preserveScroll:!0,onSuccess:()=>{v()}})},xe=s=>s==="active"?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-danger",children:"Inactive"});return e.jsxs(je,{auth:K,title:"Products",children:[(c==null?void 0:c.success)&&X&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Success!"})," ",c.success,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),H(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(c==null?void 0:c.error)&&Z&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error!"})," ",c.error,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),Y(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Product List"}),e.jsx("div",{className:"card-tools",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{L(!0),p(!1)},children:[e.jsx("i",{className:"fas fa-plus"})," Add Product"]})})]}),e.jsx("div",{className:"card-body table-responsive p-0",children:e.jsxs("table",{className:"table table-hover text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Sold"}),e.jsx("th",{children:"Rating"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"No products found"})}):E.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.item_name}),e.jsxs("td",{children:["$",parseFloat(s.item_price).toFixed(2)]}),e.jsx("td",{children:s.item_quantity}),e.jsxs("td",{children:[s.category_name||s.category||"-",s.sub_category_name&&` / ${s.sub_category_name}`]}),e.jsx("td",{children:xe(s.item_status)}),e.jsx("td",{children:s.sold_count}),e.jsxs("td",{children:[s.average_rating," (",s.total_reviews,")"]}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-info mr-1",onClick:()=>de(s),title:"Edit Product",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>he(s.id),title:"Delete Product",children:e.jsx("i",{className:"fas fa-trash"})})]})]},s.id))})]})})]})})}),$&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${W?"show":""}`,onClick:C}),e.jsx("div",{className:`modal fade ${W?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Add New Product"}),e.jsx("button",{type:"button",className:"close",onClick:C,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:oe,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Product Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${i.errors.item_name?"is-invalid":""}`,value:i.data.item_name,onChange:s=>i.setData("item_name",s.target.value),required:!0}),i.errors.item_name&&e.jsx("div",{className:"invalid-feedback",children:i.errors.item_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:`form-control ${i.errors.item_description?"is-invalid":""}`,value:i.data.item_description,onChange:s=>i.setData("item_description",s.target.value),rows:"3"}),i.errors.item_description&&e.jsx("div",{className:"invalid-feedback",children:i.errors.item_description})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:`form-control ${i.errors.item_price?"is-invalid":""}`,value:i.data.item_price,onChange:s=>i.setData("item_price",s.target.value),required:!0}),i.errors.item_price&&e.jsx("div",{className:"invalid-feedback",children:i.errors.item_price})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Quantity ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",min:"0",className:`form-control ${i.errors.item_quantity?"is-invalid":""}`,value:i.data.item_quantity,onChange:s=>i.setData("item_quantity",s.target.value),required:!0}),i.errors.item_quantity&&e.jsx("div",{className:"invalid-feedback",children:i.errors.item_quantity})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Weight"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:`form-control ${i.errors.weight?"is-invalid":""}`,value:i.data.weight,onChange:s=>i.setData("weight",s.target.value)}),i.errors.weight&&e.jsx("div",{className:"invalid-feedback",children:i.errors.weight})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Metric"}),e.jsxs("select",{className:`form-control ${i.errors.metric?"is-invalid":""}`,value:i.data.metric,onChange:s=>i.setData("metric",s.target.value),children:[e.jsx("option",{value:"",children:"Select Metric"}),e.jsx("option",{value:"kg",children:"kg"}),e.jsx("option",{value:"g",children:"g"}),e.jsx("option",{value:"lb",children:"lb"}),e.jsx("option",{value:"oz",children:"oz"}),e.jsx("option",{value:"l",children:"l"}),e.jsx("option",{value:"ml",children:"ml"}),e.jsx("option",{value:"piece",children:"piece"}),e.jsx("option",{value:"pack",children:"pack"}),e.jsx("option",{value:"box",children:"box"})]}),i.errors.metric&&e.jsx("div",{className:"invalid-feedback",children:i.errors.metric})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsxs("select",{className:`form-control ${i.errors.category?"is-invalid":""}`,value:i.data.category,onChange:s=>i.setData("category",s.target.value),children:[e.jsx("option",{value:"",children:"Select Category"}),U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.errors.category&&e.jsx("div",{className:"invalid-feedback",children:i.errors.category})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sub Category"}),e.jsxs("select",{className:`form-control ${i.errors.sub_category_id?"is-invalid":""}`,value:i.data.sub_category_id,onChange:s=>i.setData("sub_category_id",s.target.value),children:[e.jsx("option",{value:"",children:"Select Sub Category"}),T.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.errors.sub_category_id&&e.jsx("div",{className:"invalid-feedback",children:i.errors.sub_category_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Product Images ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("ul",{className:"nav nav-tabs mb-3",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${k==="upload"?"active":""}`,href:"#",onClick:s=>{s.preventDefault(),A("upload")},children:[e.jsx("i",{className:"fas fa-upload mr-1"})," Upload New"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${k==="stock"?"active":""}`,href:"#",onClick:s=>{s.preventDefault(),A("stock")},children:[e.jsx("i",{className:"fas fa-images mr-1"})," From Stock (",x.length,")"]})})]}),k==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",className:`form-control ${i.errors.item_images?"is-invalid":""}`,onChange:ee,accept:"image/*",multiple:!0}),i.errors.item_images&&e.jsx("div",{className:"invalid-feedback d-block",children:i.errors.item_images}),i.errors["item_images.0"]&&e.jsx("div",{className:"invalid-feedback d-block",children:i.errors["item_images.0"]}),e.jsx("small",{className:"form-text text-muted",children:"Upload product images (JPEG, PNG, JPG, GIF - Max 5MB per image)"}),g.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"d-block font-weight-bold mb-2",children:"Uploaded Images:"}),e.jsx("div",{className:"row",children:g.map((s,a)=>e.jsxs("div",{className:"col-md-3 mb-2 position-relative",children:[e.jsx("img",{src:s,alt:`Preview ${a+1}`,className:"img-thumbnail",style:{width:"100%",height:"100px",objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:"5px",right:"20px"},onClick:()=>se(a),children:e.jsx("i",{className:"fas fa-times"})})]},a))})]})]}),k==="stock"&&e.jsx(e.Fragment,{children:x.length===0?e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"No stock images available.",e.jsx("a",{href:"/dashboard/vendor/product-images",className:"alert-link ml-1",children:"Add some to your library first."})]}):e.jsxs(e.Fragment,{children:[e.jsx("small",{className:"form-text text-muted mb-2",children:"Click images to select/deselect. Selected images will be added to your product."}),e.jsx("div",{className:"row",style:{maxHeight:"250px",overflowY:"auto"},children:x.map(s=>e.jsx("div",{className:"col-md-3 mb-2",children:e.jsxs("div",{className:`card h-100 ${m.includes(s.image_url)?"border-primary border-2":""}`,style:{cursor:"pointer",transition:"all 0.2s"},onClick:()=>re(s.image_url),children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:s.image_url,alt:s.name,className:"card-img-top",style:{height:"80px",objectFit:"cover"},onError:a=>{a.target.src="/images/placeholder.png"}}),m.includes(s.image_url)&&e.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px"},children:e.jsx("span",{className:"badge badge-primary",children:e.jsx("i",{className:"fas fa-check"})})})]}),e.jsx("div",{className:"card-body p-1",children:e.jsx("small",{className:"text-truncate d-block",title:s.name,children:s.name})})]})},s.id))})]})}),m.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"d-block font-weight-bold mb-2",children:["Selected Stock Images (",m.length,"):"]}),e.jsx("div",{className:"row",children:m.map((s,a)=>e.jsxs("div",{className:"col-md-3 mb-2 position-relative",children:[e.jsx("img",{src:s,alt:`Stock ${a+1}`,className:"img-thumbnail",style:{width:"100%",height:"100px",objectFit:"cover"},onError:r=>{r.target.src="/images/placeholder.png"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:"5px",right:"20px"},onClick:()=>ce(s),children:e.jsx("i",{className:"fas fa-times"})})]},a))})]}),(g.length>0||m.length>0)&&e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Total images: ",g.length+m.length]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${i.errors.item_status?"is-invalid":""}`,value:i.data.item_status,onChange:s=>i.setData("item_status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),i.errors.item_status&&e.jsx("div",{className:"invalid-feedback",children:i.errors.item_status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:C,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i.processing,children:i.processing?"Creating...":"Create Product"})]})]})]})})})]}),D&&P&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${O?"show":""}`,onClick:j}),e.jsx("div",{className:`modal fade ${O?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Edit Product"}),e.jsx("button",{type:"button",className:"close",onClick:j,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:me,noValidate:!0,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Product Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"item_name",className:`form-control ${t.errors.item_name?"is-invalid":""}`,value:t.data.item_name,onChange:s=>t.setData("item_name",s.target.value),required:!0}),t.errors.item_name&&e.jsx("div",{className:"invalid-feedback",children:t.errors.item_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:"item_description",className:`form-control ${t.errors.item_description?"is-invalid":""}`,value:t.data.item_description,onChange:s=>t.setData("item_description",s.target.value),rows:"3"}),t.errors.item_description&&e.jsx("div",{className:"invalid-feedback",children:t.errors.item_description})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",name:"item_price",step:"0.01",min:"0",className:`form-control ${t.errors.item_price?"is-invalid":""}`,value:t.data.item_price,onChange:s=>t.setData("item_price",s.target.value),required:!0}),t.errors.item_price&&e.jsx("div",{className:"invalid-feedback",children:t.errors.item_price})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Quantity ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",name:"item_quantity",min:"0",className:`form-control ${t.errors.item_quantity?"is-invalid":""}`,value:t.data.item_quantity,onChange:s=>t.setData("item_quantity",s.target.value),required:!0}),t.errors.item_quantity&&e.jsx("div",{className:"invalid-feedback",children:t.errors.item_quantity})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Weight"}),e.jsx("input",{type:"number",name:"weight",step:"0.01",min:"0",className:`form-control ${t.errors.weight?"is-invalid":""}`,value:t.data.weight,onChange:s=>t.setData("weight",s.target.value)}),t.errors.weight&&e.jsx("div",{className:"invalid-feedback",children:t.errors.weight})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Metric"}),e.jsxs("select",{name:"metric",className:`form-control ${t.errors.metric?"is-invalid":""}`,value:t.data.metric,onChange:s=>t.setData("metric",s.target.value),children:[e.jsx("option",{value:"",children:"Select Metric"}),e.jsx("option",{value:"kg",children:"kg"}),e.jsx("option",{value:"g",children:"g"}),e.jsx("option",{value:"lb",children:"lb"}),e.jsx("option",{value:"oz",children:"oz"}),e.jsx("option",{value:"l",children:"l"}),e.jsx("option",{value:"ml",children:"ml"}),e.jsx("option",{value:"piece",children:"piece"}),e.jsx("option",{value:"pack",children:"pack"}),e.jsx("option",{value:"box",children:"box"})]}),t.errors.metric&&e.jsx("div",{className:"invalid-feedback",children:t.errors.metric})]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category"}),e.jsxs("select",{name:"category",className:`form-control ${t.errors.category?"is-invalid":""}`,value:t.data.category,onChange:s=>t.setData("category",s.target.value),children:[e.jsx("option",{value:"",children:"Select Category"}),U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.errors.category&&e.jsx("div",{className:"invalid-feedback",children:t.errors.category})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sub Category"}),e.jsxs("select",{name:"sub_category_id",className:`form-control ${t.errors.sub_category_id?"is-invalid":""}`,value:t.data.sub_category_id,onChange:s=>t.setData("sub_category_id",s.target.value),children:[e.jsx("option",{value:"",children:"Select Sub Category"}),T.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.errors.sub_category_id&&e.jsx("div",{className:"invalid-feedback",children:t.errors.sub_category_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Product Images"}),n.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"d-block font-weight-bold mb-2",children:"Current Images:"}),e.jsx("div",{className:"row",children:n.map((s,a)=>{const r=s.startsWith("http")||s.startsWith("/")?s:`/storage/${s.replace(/^storage\//,"")}`;return e.jsxs("div",{className:"col-md-3 mb-2 position-relative",children:[e.jsx("img",{src:r,alt:`Existing ${a+1}`,className:"img-thumbnail",style:{width:"100%",height:"100px",objectFit:"cover"},onError:u=>{u.target.src="/images/placeholder.png"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:"5px",right:"20px",zIndex:10},onClick:()=>ie(a),title:"Remove this image",children:e.jsx("i",{className:"fas fa-times"})})]},`existing-${a}`)})})]}),e.jsx("label",{className:"d-block font-weight-bold mb-2",children:"Add More Images:"}),e.jsxs("ul",{className:"nav nav-tabs mb-3",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${S==="upload"?"active":""}`,href:"#",onClick:s=>{s.preventDefault(),F("upload")},children:[e.jsx("i",{className:"fas fa-upload mr-1"})," Upload New"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${S==="stock"?"active":""}`,href:"#",onClick:s=>{s.preventDefault(),F("stock")},children:[e.jsx("i",{className:"fas fa-images mr-1"})," From Stock (",x.length,")"]})})]}),S==="upload"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",name:"item_images[]",className:`form-control ${t.errors.item_images?"is-invalid":""}`,onChange:ae,accept:"image/*",multiple:!0}),t.errors.item_images&&e.jsx("div",{className:"invalid-feedback d-block",children:t.errors.item_images}),t.errors["item_images.0"]&&e.jsx("div",{className:"invalid-feedback d-block",children:t.errors["item_images.0"]}),e.jsx("small",{className:"form-text text-muted",children:"Upload additional product images (JPEG, PNG, JPG, GIF - Max 5MB per image)"}),h.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"d-block font-weight-bold mb-2",children:"New Uploaded Images:"}),e.jsx("div",{className:"row",children:h.map((s,a)=>e.jsxs("div",{className:"col-md-3 mb-2 position-relative",children:[e.jsx("img",{src:s,alt:`New Preview ${a+1}`,className:"img-thumbnail",style:{width:"100%",height:"100px",objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:"5px",right:"20px",zIndex:10},onClick:()=>te(a),title:"Remove this image",children:e.jsx("i",{className:"fas fa-times"})})]},`new-${a}`))})]})]}),S==="stock"&&e.jsx(e.Fragment,{children:x.length===0?e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"No stock images available.",e.jsx("a",{href:"/dashboard/vendor/product-images",className:"alert-link ml-1",children:"Add some to your library first."})]}):e.jsxs(e.Fragment,{children:[e.jsx("small",{className:"form-text text-muted mb-2",children:"Click images to select/deselect."}),e.jsx("div",{className:"row",style:{maxHeight:"200px",overflowY:"auto"},children:x.map(s=>e.jsx("div",{className:"col-md-3 mb-2",children:e.jsxs("div",{className:`card h-100 ${o.includes(s.image_url)?"border-primary border-2":""}`,style:{cursor:"pointer",transition:"all 0.2s"},onClick:()=>le(s.image_url),children:[e.jsxs("div",{className:"position-relative",children:[e.jsx("img",{src:s.image_url,alt:s.name,className:"card-img-top",style:{height:"70px",objectFit:"cover"},onError:a=>{a.target.src="/images/placeholder.png"}}),o.includes(s.image_url)&&e.jsx("div",{className:"position-absolute",style:{top:"5px",right:"5px"},children:e.jsx("span",{className:"badge badge-primary",children:e.jsx("i",{className:"fas fa-check"})})})]}),e.jsx("div",{className:"card-body p-1",children:e.jsx("small",{className:"text-truncate d-block",title:s.name,children:s.name})})]})},s.id))})]})}),o.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"d-block font-weight-bold mb-2",children:["New Stock Images (",o.length,"):"]}),e.jsx("div",{className:"row",children:o.map((s,a)=>e.jsxs("div",{className:"col-md-3 mb-2 position-relative",children:[e.jsx("img",{src:s,alt:`Stock ${a+1}`,className:"img-thumbnail",style:{width:"100%",height:"100px",objectFit:"cover"},onError:r=>{r.target.src="/images/placeholder.png"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute",style:{top:"5px",right:"20px"},onClick:()=>ne(s),children:e.jsx("i",{className:"fas fa-times"})})]},a))})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:n.length+h.length+o.length>0?"text-success":"text-warning",children:[e.jsx("i",{className:`fas ${n.length+h.length+o.length>0?"fa-check-circle":"fa-exclamation-circle"} mr-1`}),"Total images: ",n.length+h.length+o.length,n.length+h.length+o.length===0&&" (At least 1 required)"]})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"item_status",className:`form-control ${t.errors.item_status?"is-invalid":""}`,value:t.data.item_status,onChange:s=>t.setData("item_status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),t.errors.item_status&&e.jsx("div",{className:"invalid-feedback",children:t.errors.item_status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:j,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t.processing,children:t.processing?"Updating...":"Update Product"})]})]})]})})})]}),I&&f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${J?"show":""}`,onClick:v}),e.jsx("div",{className:`modal fade ${J?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{type:"button",className:"close",onClick:v,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:f.item_name}),"?"]}),e.jsx("p",{className:"text-muted mb-0",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:v,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:ue,children:"Delete Product"})]})]})})})]})]})}export{Ne as default};
