import{r as n,u as N,j as e,a as h}from"./app-BOLgj3qB.js";import{A as g}from"./AdminLayout-CG6SnJGX.js";function w({auth:x,inventory:c=[],shop:y,flash:t}){const[i,o]=n.useState(!1),[u,d]=n.useState(!1),[l,m]=n.useState(null),a=N({item_quantity:""});n.useEffect(()=>{i?setTimeout(()=>d(!0),10):d(!1)},[i]);const r=()=>{d(!1),setTimeout(()=>{o(!1),m(null),a.reset()},300)};n.useEffect(()=>{t!=null&&t.success&&(r(),a.reset())},[t]);const j=s=>{m(s),a.setData({item_quantity:s.item_quantity}),o(!0),d(!1)},p=s=>{s.preventDefault(),a.put(`/dashboard/vendor/inventory/${l.id}`,{preserveScroll:!0,onSuccess:()=>{r()}})},b=s=>s==="active"?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-danger",children:"Inactive"}),v=s=>s===0?e.jsx("span",{className:"badge badge-danger",children:"Out of Stock"}):s<10?e.jsx("span",{className:"badge badge-warning",children:"Low Stock"}):e.jsx("span",{className:"badge badge-success",children:"In Stock"});return e.jsxs(g,{auth:x,title:"Inventory Management",children:[(t==null?void 0:t.success)&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Success!"})," ",t.success,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),h.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(t==null?void 0:t.error)&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error!"})," ",t.error,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),h.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Inventory"})}),e.jsx("div",{className:"card-body table-responsive p-0",children:e.jsxs("table",{className:"table table-hover text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Stock Status"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Sold"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center",children:"No inventory items found"})}):c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.item_name}),e.jsx("td",{children:s.category||"-"}),e.jsxs("td",{children:["$",parseFloat(s.item_price).toFixed(2)]}),e.jsx("td",{children:s.item_quantity}),e.jsx("td",{children:v(s.item_quantity)}),e.jsx("td",{children:b(s.item_status)}),e.jsx("td",{children:s.sold_count}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-info",onClick:()=>j(s),title:"Update Quantity",children:[e.jsx("i",{className:"fas fa-edit"})," Update"]})})]},s.id))})]})})]})})}),i&&l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${u?"show":""}`,onClick:r}),e.jsx("div",{className:`modal fade ${u?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Update Inventory"}),e.jsx("button",{type:"button",className:"close",onClick:r,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Product:"})," ",l.item_name]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Quantity ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",min:"0",className:`form-control ${a.errors.item_quantity?"is-invalid":""}`,value:a.data.item_quantity,onChange:s=>a.setData("item_quantity",s.target.value),required:!0}),a.errors.item_quantity&&e.jsx("div",{className:"invalid-feedback",children:a.errors.item_quantity})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a.processing,children:a.processing?"Updating...":"Update Quantity"})]})]})]})})})]})]})}export{w as default};
