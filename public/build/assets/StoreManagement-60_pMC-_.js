import{r as n,u,j as s,a as x}from"./app-Dqqv0FCA.js";import{A as N}from"./AdminLayout-BouIu66m.js";import{A as p}from"./AddressAutocomplete-DUrjbCVT.js";function _({auth:h,shop:a,agrivet:t,flash:r}){const[i,o]=n.useState(!1),[m,d]=n.useState(!1),e=u({shop_name:(a==null?void 0:a.shop_name)||"",shop_description:(a==null?void 0:a.shop_description)||"",shop_address:(a==null?void 0:a.shop_address)||"",shop_lat:(a==null?void 0:a.shop_lat)||"",shop_long:(a==null?void 0:a.shop_long)||"",contact_number:(a==null?void 0:a.contact_number)||"",shop_status:(a==null?void 0:a.shop_status)||"active"});n.useEffect(()=>{i?setTimeout(()=>d(!0),10):d(!1)},[i]);const c=()=>{d(!1),setTimeout(()=>{o(!1)},300)};n.useEffect(()=>{r!=null&&r.success&&c()},[r]);const j=l=>{l.preventDefault(),e.post("/dashboard/vendor/store",{preserveScroll:!0,onSuccess:()=>{}})};return s.jsxs(N,{auth:h,title:"Store Management",children:[(r==null?void 0:r.success)&&s.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[s.jsx("strong",{children:"Success!"})," ",r.success,s.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:l=>{l.preventDefault(),x.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:s.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(r==null?void 0:r.error)&&s.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[s.jsx("strong",{children:"Error!"})," ",r.error,s.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:l=>{l.preventDefault(),x.visit(window.location.pathname,{preserveState:!0,preserveScroll:!0})},children:s.jsx("span",{"aria-hidden":"true",children:"×"})})]}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card card-primary card-outline",children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h3",{className:"card-title",children:[s.jsx("i",{className:"fas fa-store mr-2"}),"Shop Information"]}),s.jsx("div",{className:"card-tools",children:a&&s.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{o(!0),d(!1)},children:[s.jsx("i",{className:"fas fa-edit"})," Edit Shop Information"]})})]}),s.jsx("div",{className:"card-body",children:a?s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Shop Name:"}),s.jsx("dd",{className:"col-sm-8",children:a.shop_name}),s.jsx("dt",{className:"col-sm-4",children:"Description:"}),s.jsx("dd",{className:"col-sm-8",children:a.shop_description||s.jsx("span",{className:"text-muted",children:"N/A"})}),s.jsx("dt",{className:"col-sm-4",children:"Address:"}),s.jsx("dd",{className:"col-sm-8",children:a.shop_address||s.jsx("span",{className:"text-muted",children:"N/A"})}),s.jsx("dt",{className:"col-sm-4",children:"Contact Number:"}),s.jsx("dd",{className:"col-sm-8",children:a.contact_number||s.jsx("span",{className:"text-muted",children:"N/A"})})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Status:"}),s.jsx("dd",{className:"col-sm-8",children:s.jsx("span",{className:`badge badge-${a.shop_status==="active"?"success":"danger"}`,children:a.shop_status})}),s.jsx("dt",{className:"col-sm-4",children:"Rating:"}),s.jsxs("dd",{className:"col-sm-8",children:[s.jsx("i",{className:"fas fa-star text-warning mr-1"}),parseFloat(a.average_rating||0).toFixed(1)," (",a.total_reviews||0," reviews)"]}),s.jsx("dt",{className:"col-sm-4",children:"Created:"}),s.jsx("dd",{className:"col-sm-8",children:new Date(a.created_at).toLocaleDateString()}),s.jsx("dt",{className:"col-sm-4",children:"Last Updated:"}),s.jsx("dd",{className:"col-sm-8",children:new Date(a.updated_at).toLocaleDateString()})]})})]}):s.jsxs("div",{className:"text-center py-5",children:[s.jsx("i",{className:"fas fa-store fa-3x text-muted mb-3"}),s.jsx("p",{className:"text-muted",children:"No shop information found. Please contact an administrator."})]})})]})})}),t&&s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card card-secondary card-outline",children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h3",{className:"card-title",children:[s.jsx("i",{className:"fas fa-building mr-2"}),"Agrivet Information"]}),s.jsx("div",{className:"card-tools",children:s.jsxs("span",{className:"badge badge-secondary",children:[s.jsx("i",{className:"fas fa-lock mr-1"})," Read Only"]})})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("p",{className:"text-muted mb-3",children:s.jsxs("small",{children:[s.jsx("i",{className:"fas fa-info-circle mr-1"}),"Your shop belongs to this Agrivet. Contact the administrator to update Agrivet information."]})}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Agrivet Name:"}),s.jsx("dd",{className:"col-sm-8",children:t.name}),s.jsx("dt",{className:"col-sm-4",children:"Description:"}),s.jsx("dd",{className:"col-sm-8",children:t.description||s.jsx("span",{className:"text-muted",children:"N/A"})})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Contact:"}),s.jsx("dd",{className:"col-sm-8",children:t.contact_number||s.jsx("span",{className:"text-muted",children:"N/A"})}),s.jsx("dt",{className:"col-sm-4",children:"Email:"}),s.jsx("dd",{className:"col-sm-8",children:t.email||s.jsx("span",{className:"text-muted",children:"N/A"})}),s.jsx("dt",{className:"col-sm-4",children:"Status:"}),s.jsx("dd",{className:"col-sm-8",children:s.jsx("span",{className:`badge badge-${t.status==="active"?"success":"danger"}`,children:t.status})})]})})]}),t.logo_url&&s.jsx("div",{className:"text-center mt-3",children:s.jsx("img",{src:t.logo_url,alt:`${t.name} Logo`,className:"img-thumbnail",style:{maxHeight:"100px"},onError:l=>{l.target.style.display="none"}})})]})]})})}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`modal-backdrop fade ${m?"show":""}`,onClick:c}),s.jsx("div",{className:`modal fade ${m?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:s.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header bg-primary text-white",children:[s.jsxs("h4",{className:"modal-title",children:[s.jsx("i",{className:"fas fa-edit mr-2"}),"Edit Shop Information"]}),s.jsx("button",{type:"button",className:"close text-white",onClick:c,children:s.jsx("span",{children:"×"})})]}),s.jsxs("form",{onSubmit:j,children:[s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Shop Name ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{type:"text",className:`form-control ${e.errors.shop_name?"is-invalid":""}`,value:e.data.shop_name,onChange:l=>e.setData("shop_name",l.target.value),required:!0}),e.errors.shop_name&&s.jsx("div",{className:"invalid-feedback",children:e.errors.shop_name})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description"}),s.jsx("textarea",{className:`form-control ${e.errors.shop_description?"is-invalid":""}`,value:e.data.shop_description,onChange:l=>e.setData("shop_description",l.target.value),rows:"3"}),e.errors.shop_description&&s.jsx("div",{className:"invalid-feedback",children:e.errors.shop_description})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Address"}),s.jsx(p,{value:e.data.shop_address,onChange:l=>e.setData("shop_address",l),onPlaceSelect:l=>{e.setData({...e.data,shop_address:l.address,shop_lat:l.lat||"",shop_long:l.lng||""})},placeholder:"Enter shop address",error:e.errors.shop_address})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Latitude ",s.jsx("small",{className:"text-muted",children:"(auto-filled from address)"})]}),s.jsx("input",{type:"number",step:"any",className:`form-control ${e.errors.shop_lat?"is-invalid":""}`,value:e.data.shop_lat,onChange:l=>e.setData("shop_lat",l.target.value),placeholder:"Auto-filled when address is selected"}),e.errors.shop_lat&&s.jsx("div",{className:"invalid-feedback",children:e.errors.shop_lat})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Longitude ",s.jsx("small",{className:"text-muted",children:"(auto-filled from address)"})]}),s.jsx("input",{type:"number",step:"any",className:`form-control ${e.errors.shop_long?"is-invalid":""}`,value:e.data.shop_long,onChange:l=>e.setData("shop_long",l.target.value),placeholder:"Auto-filled when address is selected"}),e.errors.shop_long&&s.jsx("div",{className:"invalid-feedback",children:e.errors.shop_long})]})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Contact Number"}),s.jsx("input",{type:"text",className:`form-control ${e.errors.contact_number?"is-invalid":""}`,value:e.data.contact_number,onChange:l=>e.setData("contact_number",l.target.value)}),e.errors.contact_number&&s.jsx("div",{className:"invalid-feedback",children:e.errors.contact_number})]}),s.jsxs("div",{className:"form-group",children:[s.jsxs("label",{children:["Status ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("select",{className:`form-control ${e.errors.shop_status?"is-invalid":""}`,value:e.data.shop_status,onChange:l=>e.setData("shop_status",l.target.value),required:!0,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]}),e.errors.shop_status&&s.jsx("div",{className:"invalid-feedback",children:e.errors.shop_status})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:c,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e.processing,children:e.processing?"Saving...":"Save Shop"})]})]})]})})})]})]})}export{_ as default};
