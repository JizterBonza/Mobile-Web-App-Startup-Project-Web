import{r as o,u as E,j as e,a as U}from"./app-Dqqv0FCA.js";import{A as P}from"./AdminLayout-BouIu66m.js";function K({auth:b,subCategories:h=[],flash:r}){const[x,p]=o.useState(!1),[y,n]=o.useState(!1),[g,N]=o.useState(!1),[f,d]=o.useState(!1),[j,S]=o.useState(!1),[C,i]=o.useState(!1),[_,w]=o.useState(null),[u,k]=o.useState(null),[$,A]=o.useState(!0),[M,D]=o.useState(!0),a=E({sub_category_name:"",sub_category_description:"",sub_category_status:"active"}),t=E({sub_category_name:"",sub_category_description:"",sub_category_status:"active"});o.useEffect(()=>{x?setTimeout(()=>n(!0),10):n(!1)},[x]),o.useEffect(()=>{g?setTimeout(()=>d(!0),10):d(!1)},[g]),o.useEffect(()=>{j?setTimeout(()=>i(!0),10):i(!1)},[j]);const m=()=>{n(!1),setTimeout(()=>{p(!1),a.reset(),a.setData({sub_category_name:"",sub_category_description:"",sub_category_status:"active"})},300)},c=()=>{d(!1),setTimeout(()=>{N(!1),w(null),t.reset()},300)},l=()=>{i(!1),setTimeout(()=>{S(!1),k(null)},300)};o.useEffect(()=>{r!=null&&r.success&&(m(),c(),l(),a.reset(),t.reset(),A(!0)),r!=null&&r.error&&D(!0)},[r]);const v=b.user.user_type==="super_admin"?"/dashboard/super-admin/sub-categories":b.user.user_type==="admin"?"/dashboard/admin/sub-categories":"/dashboard/sub-categories",R=s=>{s.preventDefault(),a.post(v,{preserveScroll:!0,onSuccess:()=>{a.reset()}})},I=s=>{w(s),t.setData({sub_category_name:String(s.sub_category_name||""),sub_category_description:String(s.sub_category_description||""),sub_category_status:String(s.sub_category_status||"active")}),N(!0),d(!1)},T=s=>{s.preventDefault(),_&&t.put(`${v}/${_.id}`,{preserveScroll:!0,onSuccess:()=>{c()}})},F=s=>{const B=h.find(L=>L.id===s);k(B),S(!0),i(!1)},q=()=>{u&&U.delete(`${v}/${u.id}`,{preserveScroll:!0,onSuccess:()=>{l()}})},z=s=>s==="active"?e.jsx("span",{className:"badge badge-success",children:"Active"}):e.jsx("span",{className:"badge badge-danger",children:"Inactive"});return e.jsxs(P,{auth:b,title:"Sub-Categories",children:[(r==null?void 0:r.success)&&$&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Success!"})," ",r.success,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),A(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),(r==null?void 0:r.error)&&M&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.jsx("strong",{children:"Error!"})," ",r.error,e.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s=>{s.preventDefault(),s.stopPropagation(),D(!1)},children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:"Sub-Category List"}),e.jsx("div",{className:"card-tools",children:e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{p(!0),n(!1)},children:[e.jsx("i",{className:"fas fa-plus"})," Add Sub-Category"]})})]}),e.jsx("div",{className:"card-body table-responsive p-0",children:e.jsxs("table",{className:"table table-hover text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:"No sub-categories found"})}):h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.sub_category_name}),e.jsx("td",{children:s.sub_category_description||"-"}),e.jsx("td",{children:z(s.sub_category_status)}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-info mr-1",onClick:()=>I(s),title:"Edit Sub-Category",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>F(s.id),title:"Delete Sub-Category",children:e.jsx("i",{className:"fas fa-trash"})})]})]},s.id))})]})})]})})}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${y?"show":""}`,onClick:m}),e.jsx("div",{className:`modal fade ${y?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Add New Sub-Category"}),e.jsx("button",{type:"button",className:"close",onClick:m,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Sub-Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${a.errors.sub_category_name?"is-invalid":""}`,value:a.data.sub_category_name,onChange:s=>a.setData("sub_category_name",s.target.value),required:!0}),a.errors.sub_category_name&&e.jsx("div",{className:"invalid-feedback",children:a.errors.sub_category_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:`form-control ${a.errors.sub_category_description?"is-invalid":""}`,value:a.data.sub_category_description,onChange:s=>a.setData("sub_category_description",s.target.value),rows:"3"}),a.errors.sub_category_description&&e.jsx("div",{className:"invalid-feedback",children:a.errors.sub_category_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${a.errors.sub_category_status?"is-invalid":""}`,value:a.data.sub_category_status,onChange:s=>a.setData("sub_category_status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),a.errors.sub_category_status&&e.jsx("div",{className:"invalid-feedback",children:a.errors.sub_category_status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:m,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a.processing,children:a.processing?"Creating...":"Create Sub-Category"})]})]})]})})})]}),g&&_&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${f?"show":""}`,onClick:c}),e.jsx("div",{className:`modal fade ${f?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Edit Sub-Category"}),e.jsx("button",{type:"button",className:"close",onClick:c,children:e.jsx("span",{children:"×"})})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Sub-Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${t.errors.sub_category_name?"is-invalid":""}`,value:t.data.sub_category_name,onChange:s=>t.setData("sub_category_name",s.target.value),required:!0}),t.errors.sub_category_name&&e.jsx("div",{className:"invalid-feedback",children:t.errors.sub_category_name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:`form-control ${t.errors.sub_category_description?"is-invalid":""}`,value:t.data.sub_category_description,onChange:s=>t.setData("sub_category_description",s.target.value),rows:"3"}),t.errors.sub_category_description&&e.jsx("div",{className:"invalid-feedback",children:t.errors.sub_category_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-control ${t.errors.sub_category_status?"is-invalid":""}`,value:t.data.sub_category_status,onChange:s=>t.setData("sub_category_status",s.target.value),required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),t.errors.sub_category_status&&e.jsx("div",{className:"invalid-feedback",children:t.errors.sub_category_status})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:c,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t.processing,children:t.processing?"Updating...":"Update Sub-Category"})]})]})]})})})]}),j&&u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`modal-backdrop fade ${C?"show":""}`,onClick:l}),e.jsx("div",{className:`modal fade ${C?"show":""} d-block`,tabIndex:"-1",style:{zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h4",{className:"modal-title",children:"Confirm Delete"}),e.jsx("button",{type:"button",className:"close",onClick:l,children:e.jsx("span",{children:"×"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Are you sure you want to delete ",e.jsx("strong",{children:u.sub_category_name}),"?"]}),e.jsx("p",{className:"text-muted mb-0",children:"This action cannot be undone."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:q,children:"Delete Sub-Category"})]})]})})})]})]})}export{K as default};
