import{r as c,j as s,L as l}from"./app-Dqqv0FCA.js";import{A as N}from"./AdminLayout-BouIu66m.js";function g({auth:d,shop:e,agrivet:n,stats:a={}}){const[f,m]=c.useState(null),[o,i]=c.useState(!0);return c.useEffect(()=>{const t=async()=>{var x;try{const r=await fetch("/session/check",{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":(x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content")}});if(r.ok){const h=await r.json();m(h.session_data),i(h.valid)}else i(!1)}catch(r){console.error("Session check failed:",r),i(!1)}};t();const j=setInterval(t,5*60*1e3);return()=>clearInterval(j)},[]),s.jsxs(N,{auth:d,title:"Vendor Dashboard",children:[!o&&s.jsxs("div",{className:"alert alert-danger alert-dismissible",children:[s.jsx("button",{type:"button",className:"close","data-dismiss":"alert","aria-hidden":"true",children:"Ã—"}),s.jsxs("h5",{children:[s.jsx("i",{className:"icon fas fa-ban"})," Session Expired!"]}),"Your session has expired. Please refresh the page to login again."]}),!e&&s.jsxs("div",{className:"alert alert-warning",children:[s.jsxs("h5",{children:[s.jsx("i",{className:"icon fas fa-exclamation-triangle"})," No Shop Assigned"]}),"You are not currently associated with any shop. Please contact an administrator to be assigned to a shop."]}),e&&s.jsx("div",{className:"row mb-4",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card card-primary card-outline",children:[s.jsxs("div",{className:"card-header",children:[s.jsxs("h3",{className:"card-title",children:[s.jsx("i",{className:"fas fa-store mr-2"}),e.shop_name]}),s.jsx("div",{className:"card-tools",children:s.jsx("span",{className:`badge badge-${e.shop_status==="active"?"success":"danger"}`,children:e.shop_status})})]}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-6",children:[e.shop_description&&s.jsxs("p",{children:[s.jsx("i",{className:"fas fa-info-circle mr-2 text-muted"}),e.shop_description]}),e.shop_address&&s.jsxs("p",{children:[s.jsx("i",{className:"fas fa-map-marker-alt mr-2 text-muted"}),e.shop_address]})]}),s.jsxs("div",{className:"col-md-6",children:[n&&s.jsxs("p",{children:[s.jsx("i",{className:"fas fa-building mr-2 text-muted"}),s.jsx("strong",{children:"Agrivet:"})," ",n.name]}),s.jsxs("p",{children:[s.jsx("i",{className:"fas fa-star mr-2 text-warning"}),s.jsx("strong",{children:"Rating:"})," ",parseFloat(e.average_rating||0).toFixed(1)," (",e.total_reviews||0," reviews)"]})]})]})})]})})}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-lg-3 col-6",children:s.jsxs("div",{className:"small-box bg-info",children:[s.jsxs("div",{className:"inner",children:[s.jsx("h3",{children:a.new_orders||0}),s.jsx("p",{children:"New Orders"})]}),s.jsx("div",{className:"icon",children:s.jsx("i",{className:"fas fa-shopping-bag"})}),s.jsxs(l,{href:"/dashboard/vendor/orders",className:"small-box-footer",children:["More info ",s.jsx("i",{className:"fas fa-arrow-circle-right"})]})]})}),s.jsx("div",{className:"col-lg-3 col-6",children:s.jsxs("div",{className:"small-box bg-success",children:[s.jsxs("div",{className:"inner",children:[s.jsx("h3",{children:a.products||0}),s.jsx("p",{children:"Products"})]}),s.jsx("div",{className:"icon",children:s.jsx("i",{className:"fas fa-box"})}),s.jsxs(l,{href:"/dashboard/vendor/products",className:"small-box-footer",children:["More info ",s.jsx("i",{className:"fas fa-arrow-circle-right"})]})]})}),s.jsx("div",{className:"col-lg-3 col-6",children:s.jsxs("div",{className:"small-box bg-warning",children:[s.jsxs("div",{className:"inner",children:[s.jsx("h3",{children:a.pending_reviews||0}),s.jsx("p",{children:"Pending Reviews"})]}),s.jsx("div",{className:"icon",children:s.jsx("i",{className:"fas fa-star"})}),s.jsxs("a",{href:"#",className:"small-box-footer",children:["More info ",s.jsx("i",{className:"fas fa-arrow-circle-right"})]})]})}),s.jsx("div",{className:"col-lg-3 col-6",children:s.jsxs("div",{className:"small-box bg-danger",children:[s.jsxs("div",{className:"inner",children:[s.jsxs("h3",{children:["$",parseFloat(a.total_revenue||0).toFixed(2)]}),s.jsx("p",{children:"Total Revenue"})]}),s.jsx("div",{className:"icon",children:s.jsx("i",{className:"fas fa-dollar-sign"})}),s.jsxs(l,{href:"/dashboard/vendor/payouts",className:"small-box-footer",children:["More info ",s.jsx("i",{className:"fas fa-arrow-circle-right"})]})]})})]}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h3",{className:"card-title",children:"Vendor Dashboard"})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h4",{children:["Welcome, ",d.user.name,"!"]}),s.jsxs("p",{className:"text-muted",children:["You are logged in as ",s.jsx("strong",{children:"Vendor"})]}),s.jsx("p",{className:"text-muted",children:"Manage your products, orders, and inventory from here."}),o&&s.jsxs("div",{className:"alert alert-success",children:[s.jsx("i",{className:"fas fa-check"})," Session is active and valid"]})]})})]})})})]})}export{g as default};
