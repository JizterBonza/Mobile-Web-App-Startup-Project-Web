/* AdminLTE CSS - Using local files */

/* Tailwind CSS */
@import 'tailwindcss';
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles to integrate AdminLTE with Tailwind */
@layer base {
    /* Ensure AdminLTE styles take precedence for admin pages */
    .wrapper {
        @apply min-h-screen;
    }
    
    /* Override some Tailwind defaults for better AdminLTE integration */
    .btn {
        @apply inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2;
    }
    
    .btn-primary {
        @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
    }
    
    .btn-outline-primary {
        @apply border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500;
    }
    
    .form-control {
        @apply block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm;
    }
    
    .alert {
        @apply px-4 py-3 rounded-md border;
    }
    
    .alert-success {
        @apply bg-green-50 border-green-200 text-green-800;
    }
    
    .alert-danger {
        @apply bg-red-50 border-red-200 text-red-800;
    }
    
    .alert-info {
        @apply bg-blue-50 border-blue-200 text-blue-800;
    }
}

@layer base {
    body {
        font-family: "Poppins", sans-serif;
    }
}

@layer components {
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="search"],
    input[type="tel"],
    input[type="url"], textarea {
        @apply block w-full rounded-md border-0 p-2 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm bg-white;
    }
    label {
        @apply block text-sm font-medium leading-6 text-slate-900 first-letter:capitalize;
    }
    header {
        @apply bg-slate-800 shadow-md;
    }
    header nav {
        @apply p-5 max-w-screen-lg mx-auto flex items-center justify-between;
    }
    main {
        @apply max-w-screen-lg mx-auto;
    }
    
    /* Fix AdminLTE navbar to use full width */
    .main-header.navbar {
        @apply max-w-full w-full flex justify-between;
        z-index: 1040 !important;
        margin-left: 250px;
        width: calc(100% - 250px) !important;
        transition: margin-left 0.3s ease, width 0.3s ease;
    }
    /* Navbar adjustment when sidebar is collapsed */
    .wrapper.sidebar-collapse .main-header.navbar {
        margin-left: 4.6rem;
        width: calc(100% - 4.6rem) !important;
    }
    .main-header.navbar .navbar-nav.ml-auto {
        @apply ml-auto mr-3;
    }
    .main-header.navbar .navbar-nav .dropdown-menu {
        z-index: 1050 !important;
    }
    /* Ensure sidebar doesn't overlap navbar */
    .main-sidebar {
        z-index: 1030 !important;
        transition: width 0.3s ease, transform 0.3s ease;
    }
    /* Sidebar collapse styles */
    .wrapper.sidebar-collapse .main-sidebar {
        width: 4.6rem !important;
    }
    .wrapper.sidebar-collapse .main-sidebar .brand-text,
    .wrapper.sidebar-collapse .main-sidebar .nav-sidebar .nav-link p {
        opacity: 0;
        width: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .wrapper.sidebar-collapse .main-sidebar:hover {
        width: 250px !important;
    }
    .wrapper.sidebar-collapse .main-sidebar:hover .brand-text,
    .wrapper.sidebar-collapse .main-sidebar:hover .nav-sidebar .nav-link p {
        opacity: 1;
        width: auto;
        visibility: visible;
    }
    
    /* Profile dropdown in sidebar - ensure it's always visible */
    .main-sidebar .user-panel {
        overflow: visible !important;
    }
    .main-sidebar .user-panel .user-panel-info {
        transition: opacity 0.3s ease, width 0.3s ease, visibility 0.3s ease;
    }
    .main-sidebar .user-panel .user-panel-chevron {
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    /* When sidebar is collapsed, hide text but keep dropdown functional */
    .wrapper.sidebar-collapse .main-sidebar .user-panel .user-panel-info,
    .wrapper.sidebar-collapse .main-sidebar .user-panel .user-panel-chevron {
        opacity: 0;
        width: 0;
        overflow: hidden;
        visibility: hidden;
    }
    /* When hovering collapsed sidebar, show text again */
    .wrapper.sidebar-collapse .main-sidebar:hover .user-panel .user-panel-info,
    .wrapper.sidebar-collapse .main-sidebar:hover .user-panel .user-panel-chevron {
        opacity: 1;
        width: auto;
        visibility: visible;
    }
    /* Ensure dropdown menu is always on top and visible */
    .profile-dropdown-menu {
        z-index: 1100 !important;
    }
    /* Center user panel image in collapsed state */
    .wrapper.sidebar-collapse .main-sidebar .user-panel .image {
        margin: 0 auto;
    }
    .wrapper.sidebar-collapse .main-sidebar:hover .user-panel .image {
        margin: 0;
    }
    /* Content wrapper adjustment */
    .wrapper .content-wrapper {
        margin-left: 250px;
        transition: margin-left 0.3s ease;
    }
    .wrapper.sidebar-collapse .content-wrapper {
        margin-left: 4.6rem;
    }
    /* Footer adjustment */
    .wrapper .main-footer {
        margin-left: 250px;
        transition: margin-left 0.3s ease;
    }
    .wrapper.sidebar-collapse .main-footer {
        margin-left: 4.6rem;
    }
    .primary-btn {
        @apply flex w-full justify-center rounded-md bg-blue-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-slate-400 disabled:cursor-wait;
    }
    .text-link {
        @apply font-semibold text-blue-500 hover:text-blue-600;
    }
    /* Only apply light nav-link styles to dark header navs (public pages) */
    header .nav-link {
        @apply text-slate-200 hover:bg-slate-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium;
    }
    /* Ensure AdminLTE navbar links are visible on white background */
    .main-header.navbar .nav-link {
        color: #4a5568 !important;
        padding: 0.5rem 1rem !important;
    }
    .main-header.navbar .nav-link:hover {
        color: #1a202c !important;
        background-color: transparent !important;
    }
    .title {
        @apply my-6 text-center text-3xl font-bold leading-9 text-slate-900;
    }
    .error {
        @apply text-xs text-red-500 mt-1;
    }
    table {
        @apply w-full text-sm text-left rounded-md shadow-lg overflow-hidden mb-6 table-auto bg-white;
    }
    thead {
        @apply text-xs uppercase font-medium border-b border-slate-100 text-slate-600;
    }
    tbody tr {
        @apply hover:bg-slate-100 w-full p-0;
    }
    th {
        @apply px-6 py-4;
    }
    td {
        @apply px-6 py-4 border-b border-slate-100;
    }
    .avatar {
        @apply w-8 h-8 rounded-full overflow-hidden object-center object-cover;
    }
    .round-btn {
        @apply w-8 h-8 overflow-auto rounded-full bg-slate-100 focus:outline-none focus:ring-1 focus:ring-slate-100 focus:ring-offset-2 focus:ring-offset-slate-800;
    }
}

/* Fix modal scrolling - Global fix for all scrollable modals */
.modal {
    overflow: visible !important;
}

.modal.show {
    overflow-y: auto !important;
    padding-right: 0 !important;
}

.modal.show .modal-dialog-scrollable {
    overflow: visible !important;
}

/* Fix for scrollable modals with centered dialog */
.modal-dialog-scrollable {
    max-height: calc(100% - 3.5rem) !important;
}

.modal-dialog-scrollable .modal-content {
    max-height: calc(100vh - 3.5rem) !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
}

.modal-dialog-scrollable .modal-header {
    flex-shrink: 0 !important;
}

.modal-dialog-scrollable .modal-body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    flex: 1 1 auto !important;
    -webkit-overflow-scrolling: touch;
    min-height: 0 !important;
    max-height: calc(100vh - 250px) !important;
}

.modal-dialog-scrollable .modal-footer {
    flex-shrink: 0 !important;
}

/* Specific fix for centered + scrollable combination */
.modal-dialog-centered.modal-dialog-scrollable {
    max-height: calc(100% - 3.5rem) !important;
    height: auto !important;
    margin: 1.75rem auto !important;
    display: flex !important;
    align-items: center !important;
    min-height: calc(100% - 3.5rem) !important;
}

.modal-dialog-centered.modal-dialog-scrollable .modal-content {
    max-height: calc(100vh - 3.5rem) !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
    margin: 0 !important;
}

.modal-dialog-centered.modal-dialog-scrollable .modal-body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    flex: 1 1 auto !important;
    -webkit-overflow-scrolling: touch;
    min-height: 0 !important;
    max-height: calc(100vh - 250px) !important;
}

@media (max-width: 575.98px) {
    .modal-dialog-scrollable {
        max-height: calc(100% - 1rem) !important;
    }
    
    .modal-dialog-scrollable .modal-content {
        max-height: calc(100vh - 1rem) !important;
    }
    
    .modal-dialog-scrollable .modal-body {
        max-height: calc(100vh - 200px) !important;
    }
    
    .modal-dialog-centered.modal-dialog-scrollable {
        max-height: calc(100% - 1rem) !important;
        min-height: calc(100% - 1rem) !important;
        margin: 0.5rem !important;
    }
    
    .modal-dialog-centered.modal-dialog-scrollable .modal-content {
        max-height: calc(100vh - 1rem) !important;
    }
    
    .modal-dialog-centered.modal-dialog-scrollable .modal-body {
        max-height: calc(100vh - 200px) !important;
    }
}